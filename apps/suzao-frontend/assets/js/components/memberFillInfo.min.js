addEventListener("load",()=>{Vue.component("member-fill-info",{props:{member_sup:{type:Array,default:function(){return[]}}},inject:["callback"],data:function(){return{memberIndustry:[],randomKey:Math.random(),formData:{industry:[],name:"",company:""},loading:!1}},created:function(){this.randomKey=Math.random(),this.getMemberIndustry()},methods:{submitForm:function(){var e=this;this.$refs.refMemberFillInfo.validate(function(t){if(t&&(e.formData.industry.length||e.formData.company||e.formData.name)){var a=new FormData;e.member_sup.includes(1)&&e.formData.industry.length&&a.append("industry",e.formData.industry.join(",")),e.member_sup.includes(2)&&e.formData.company&&a.append("company",e.formData.company),e.member_sup.includes(3)&&e.formData.name&&a.append("name",e.formData.name),e.loading=!0,axios({url:"/member/fillInfo",method:"post",data:a,params:{scene:"apply"}}).then(function(t){t.data&&1===t.data.status&&(e.$message({type:"success",message:"保存成功!"}),e.callback())}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})}})},itemQuerySearch:function(e,t){if(!(e.length<2)){var a=new URLSearchParams;a.append("key",e),axios({url:"/vendor/autocompleteAddress",method:"post",data:a,params:{act:"company"}}).then(function(e){if(200===e.status){var a=e.data;if(1===a.status){if(0===a.data.length)return t([]);var n=a.data.map(function(e){return{value:e}});return t(n)}}return t([])}).catch(function(e){t([])})}},getMemberIndustry:function(){var e=this;this.memberIndustry.length||axios({url:"/vendor/getMemberIndustry"}).then(function(t){t.data&&1===t.data.status&&(e.memberIndustry=t.data.data)})}},template:'<div class="form-content"><div class="title">'+CHAT_TEXT.formTitle+'</div><div class="tip">'+CHAT_TEXT.formTip+'</div><el-row :gutter="30" type="flex"><el-form :model="formData" ref="refMemberFillInfo" :key="randomKey" v-loading="loading"><el-col :span="24"><el-form-item v-if="member_sup.includes(3)" prop="name"><el-input v-model="formData.name" placeholder="请输入姓名"></el-input></el-form-item></el-col><el-col :span="24"><el-form-item v-if="member_sup.includes(1)" prop="industry"><el-select style="width:100%" v-model="formData.industry" filterable placeholder="请输入应用行业" clearable default-first-option allow-create multiple collapse-tags><el-option v-for="(it, ind) in memberIndustry" :key="ind" :label="it" :value="it"></el-option></el-select></el-form-item></el-col><el-col :span="24"><el-form-item v-if="member_sup.includes(2)" prop="company"><el-autocomplete style="width:100%" v-model="formData.company" :fetch-suggestions="itemQuerySearch" :trigger-on-focus="false" placeholder="请输入公司"></el-autocomplete></el-form-item></el-col><el-col :span="24"><el-form-item><el-button type="primary" class="color-btn suzao-btn" @click="submitForm">确认</el-button></el-form-item></el-col></el-form></el-row></div>'})});