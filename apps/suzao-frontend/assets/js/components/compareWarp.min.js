addEventListener("load",()=>{Vue.component("compare-warp",{props:{compareList:{default:()=>[],type:Array},compareMax:{default:5,type:Number}},data:()=>({compareDialog:!1,hrefCompare:"",compareCoordinate:{x:0,y:0}}),watch:{compareList:{handler(e,a){localStorage.setItem("compareList",JSON.stringify(e)),e.length>=2?this.openCompareDialog():this.hrefCompare="",this.toggleCompareWarp(Boolean(e.length))},immediate:!0,deep:!0}},computed:{drawerData(){return this.compareList.map(e=>{const a=e.split("|");return{name:a[1],uuid:a[0]}})},outViewsShow(){return!Boolean(this.hrefCompare)}},methods:{openCompareDialog(){const e=new FormData,a={},t=[],r=this.compareList.map(e=>{const a=e.split("|");return a[2]&&t.push(a[2]),a[0]});t.length&&(a.adv_compare_id=[...new Set(t)].join(",")),e.append("id",r.join(",")),axios({url:"/plastic/getCompareCode",method:"post",headers:{"X-Requested-With":"XMLHttpRequest"},data:e}).then(({data:e})=>{1===e.status&&1===e.data.can_view&&(a.code=e.data.code,this.hrefCompare="/plastic/compareV2?"+new URLSearchParams(a).toString()),5007===e.code&&(this.$message({type:"error",message:"物性对比为付费功能，"+e.msg,customClass:"z-index-max"}),window.openMemberInterest())})},removeCompare(e){this.$emit("remove-compare",e)},toggleCompareWarp:function(e){this.compareDialog=e,this.$refs.compareWarp&&(this.$refs.compareWarp.style.transition="transform 0.4s, width 0.4s",e?this.$refs.compareWarp.style.transform="translate("+this.compareCoordinate.x+"px, "+this.compareCoordinate.y+"px)":this.$refs.compareWarp.style.removeProperty("transform"),setTimeout(()=>{this.$refs.compareWarp.style.transition="none"},400))}},directives:{drag:{inserted(e,a,t){var r=0,o=0,s=0,n=0,i=!1;const l=t.context;e.addEventListener("mousedown",a=>{i=l.compareDialog&&!a.target.classList.contains("icon"),r=a.clientX,o=a.clientY;var t=getComputedStyle(e).transform;if("none"!==t){var p=t.match(/matrix.*\((.+)\)/)[1].split(", ");s=parseFloat(p[4]),n=parseFloat(p[5])}e.style.cursor="grabbing"}),document.addEventListener("mousemove",a=>{if(i){var t=a.clientX-r,p=a.clientY-o,m=s+t,c=n+p;l.compareCoordinate={x:m,y:c},e.style.transform="translate("+m+"px, "+c+"px)"}}),document.addEventListener("mouseup",()=>{i=!1,e.style.cursor="grab"}),document.addEventListener("mouseleave",()=>{i=!1,e.style.cursor="grab"})}}},template:'\n    <div class="compare-warp" v-drag ref="compareWarp" v-show="compareList.length">\n      <div class="compare-table" v-if=\'compareDialog\'>\n        <div class="header"><span>物性对比</span> <i class="el-icon-close" @click=\'toggleCompareWarp(false)\'></i></div>\n        <el-table :data="drawerData" :show-header="false" style="width: 100%">\n          <el-table-column prop="name"></el-table-column>\n          <el-table-column width=\'32\' class-name="delete">\n            <template slot-scope="scope">\n              <i class="icon el-icon-delete" @click="removeCompare(scope.$index)"></i>\n            </template>\n          </el-table-column>\n        </el-table>\n        <div class="compare-footer">\n          <el-button @click="removeCompare()">清空</el-button>\n          <el-link class="btn btnLink" v-if="outViewsShow" :underline="false" disabled>对比</el-link>\n          <el-link class="btn btnLink" v-else :underline="false" :href="hrefCompare" :disabled="compareList.length < 2" target=\'_blank\'>对比</el-link>\n        </div>\n      </div>\n      <div class="compare-thumbnail" @click=\'toggleCompareWarp(true)\' v-else>\n        对比 <span class="num">{{compareList.length}}</span>\n      </div>\n    </div>\n    '})});